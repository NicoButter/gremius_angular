<section class="efemerides-container">
  <div class="efemerides-header">
    <h1>Efemérides</h1>
    <p class="fecha-actual">Mes de {{ mesActual }}</p>
  </div>

  <!-- Efeméride principal destacada -->
  <article class="efemeride-destacada" *ngIf="efemeridePrincipal">
    <div class="destacada-badge" role="status" aria-live="polite">
      <i class="fa-solid fa-star" aria-hidden="true"></i>
      <span>{{ getMensajeDiasHasta(efemeridePrincipal) }}</span>
    </div>
    <time class="destacada-fecha" [attr.datetime]="efemeridePrincipal.mes + '-' + efemeridePrincipal.dia">
      {{ efemeridePrincipal.dia }} de {{ getNombreMes(efemeridePrincipal.mes) }}
    </time>
    <h2 class="destacada-titulo">{{ efemeridePrincipal.titulo }}</h2>
    <div class="destacada-decoracion" aria-hidden="true">
      <i class="fa-solid fa-calendar-day"></i>
    </div>
  </article>

  <!-- Efeméride que pasó recientemente -->
  <aside class="efemeride-pasada" *ngIf="efemeridePasada && efemeridePasada.diasHasta! >= -7">
    <div class="pasada-badge">
      <i class="fa-solid fa-clock-rotate-left" aria-hidden="true"></i>
      <span>{{ getMensajeDiasHasta(efemeridePasada) }}</span>
    </div>
    <div class="pasada-contenido">
      <time class="pasada-fecha" [attr.datetime]="efemeridePasada.mes + '-' + efemeridePasada.dia">
        {{ efemeridePasada.dia }} de {{ getNombreMes(efemeridePasada.mes) }}
      </time>
      <p class="pasada-titulo">{{ efemeridePasada.titulo }}</p>
    </div>
  </aside>

  <!-- Próximas efemérides -->
  <section class="proximas-efemerides" *ngIf="efemeridesProximas.length > 0">
    <h3>
      <i class="fa-solid fa-calendar-days" aria-hidden="true"></i>
      Próximas Efemérides
    </h3>
    <div class="proximas-lista" role="list">
      <article class="proxima-item" *ngFor="let efemeride of efemeridesProximas" role="listitem">
        <time class="proxima-fecha" [attr.datetime]="efemeride.mes + '-' + efemeride.dia">
          <span class="dia">{{ efemeride.dia }}</span>
          <span class="mes">{{ getNombreMes(efemeride.mes).substring(0, 3) }}</span>
        </time>
        <div class="proxima-contenido">
          <p class="proxima-titulo">{{ efemeride.titulo }}</p>
          <span class="proxima-dias" *ngIf="efemeride.diasHasta && efemeride.diasHasta <= 30">
            {{ getMensajeDiasHasta(efemeride) }}
          </span>
        </div>
      </article>
    </div>
  </section>

  <!-- Listado completo por mes -->
  <section class="efemerides-completo">
    <h3>
      <i class="fa-solid fa-list" aria-hidden="true"></i>
      Calendario Completo de Efemérides
    </h3>
    <div class="meses-container">
      <article class="mes-bloque" *ngFor="let mes of [1,2,3,4,5,6,7,8,9,10,11,12]">
        <h4 class="mes-titulo">{{ getNombreMes(mes) }}</h4>
        <ul class="mes-lista">
          <li *ngFor="let efemeride of getEfemeridesDelMes(mes)" 
              [class.es-destacada]="efemeride.dia === efemeridePrincipal?.dia && efemeride.mes === efemeridePrincipal?.mes">
            <time class="dia-numero" [attr.datetime]="efemeride.mes + '-' + efemeride.dia">{{ efemeride.dia }}</time>
            <span class="efemeride-texto">{{ efemeride.titulo }}</span>
          </li>
        </ul>
      </article>
    </div>
  </section>
</section>
